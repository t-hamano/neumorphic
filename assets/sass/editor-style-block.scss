/*--------------------------------------------------------------
# Block editor styles
--------------------------------------------------------------*/

@import "variable";
@import "mixin";

/*------------------------------------------
## Basic Style
------------------------------------------*/

.editor-post-title__block {

	@include nm-border;

	&::after {
		bottom: 12px;
		left: 14px;
		width: calc(100% - 28px);
		height: 3px;
	}

	.editor-post-title__input {

		@include nm-text-border;
		color: var(--color-text-main);
		font-size: 2.2em;
		font-family: $base_font_falily;
		line-height: 1.4;
		letter-spacing: $base_letter_spacing;

		&:focus {
			color: inherit;
		}
	}
}

.editor-styles-wrapper {
	background: var(--color-bg);

	.wp-block {
		max-width: 800px;
		color: var(--color-text-main);
		font-size: $base_font_size_pc;
		font-family: $base_font_falily;
		line-height: $base_line_height;
		letter-spacing: $base_letter_spacing;
		word-break: break-word;

		.wp-block {
			color: inherit;
		}

		[data-block] {
			margin-top: 56px;
			margin-bottom: 56px;
		}

		&[data-align="left"],
		&[data-align="right"] {

			[data-block] {
				margin-top: 0;
				margin-bottom: 0;
			}
		}

		a {
			color: var(--color-text-link);
			text-decoration: none;
		}

		code {
			padding: 0.1em 0.3em;
			color: var(--color-text-main);
			font-family: $base_code_font_family;
			background: var(--color-nm-dark);
			border-radius: 4px;
		}
	}

	// Heading
	[data-type="core/heading"] {

		h1,
		h2,
		h3,
		h4,
		h5,
		h6 {
			margin-top: 2em;
			margin-bottom: 1em;
			font-weight: bold;
			line-height: 1.4;

			@include nm-text-border;
		}

		h1,
		h2 {

			@include nm-border;
			padding-bottom: 0.2em;
		}

		h1 {
			font-size: 2em;
		}

		h2 {
			font-size: 1.8em;
		}

		h3 {
			font-size: 1.6em;
		}

		h4 {
			font-size: 1.4em;
		}

		h5 {
			font-size: 1.2em;
		}

		h6 {
			font-size: 1em;
		}
	}

	// Paragraph
	[data-type="core/paragraph"] {

		p {
			margin: 0;

			&.has-background {
				padding: 15px 20px;
			}

			&.has-drop-cap:not(:focus)::first-letter {
				float: left;
				margin: 0 0.1em 0 0;
				padding: 0;
				font-size: 4em;
				line-height: 1;
			}
		}
	}

	// List
	[data-type="core/list"] {

		> ul,
		> ol {
			margin-left: 0;
			padding-left: 1.5em;

			li {
				margin: 0.5em 0;
			}

			ul {
				margin-left: 0;
				padding: 0;
				list-style: none;

				li {
					position: relative;
					padding-left: 1em;

					&::before {
						position: absolute;
						left: 0;
						content: "-";
					}
				}
			}

			ol {
				margin-left: 0;
				padding-left: 1.5em;
			}
		}
	}
}

/*------------------------------------------
## Common Block
------------------------------------------*/

/*----------------------
### Image
----------------------*/

[data-type="core/image"] {
	font-size: inherit;
}

/*----------------------
### Gallery
----------------------*/

[data-type="core/gallery"] {
	font-size: inherit;
}

/*----------------------
### Quote
----------------------*/

[data-type="core/quote"] {

	.wp-block-quote,
	.wp-block-quote.has-text-align-center,
	.wp-block-quote.has-text-align-right {
		position: relative;
		padding: 2em 2em 2em 3.5em;
		border: none;
		border-radius: $base_border_radius;

		@include nm-reverse;

		&::before {

			@include nm-text();
			position: absolute;
			top: 0.5em;
			left: 0.7em;
			font-weight: 900;
			font-size: 1.6em;
			font-family: "Font Awesome 5 Free";
			content: "\f10d";
		}

		p {
			margin: 0 0 1em;
		}

		&__citation {
			display: block;
			color: inherit;
			font-size: 0.8em;
			font-style: italic;
			opacity: $text_color_thin;
		}

		&.is-style-large {
			margin-bottom: 0;
			padding: 2em 2em 2em 5em;

			&::before {
				font-size: 2.4em;
			}

			p {
				font-size: 1.4em;
				font-style: normal;
				line-height: inherit;
			}
		}
	}
}

/*----------------------
### Audio
----------------------*/

[data-type="core/audio"] {

	.wp-block-audio {

		audio {

			@include nm-reverse;
			display: inline-block;
			width: auto;
			padding: 5px;
			border-radius: 1000px;
		}

		figcaption {
			margin-top: 1em;
			margin-bottom: 0;
			color: inherit;
			font-size: 0.8em;
			text-align: inherit;
			opacity: $text_color_thin;
		}
	}
}

/*----------------------
### Cover
----------------------*/

[data-type="core/cover"] {
	font-size: inherit;
}

/*----------------------
### File
----------------------*/

[data-type="core/file"] {

	.wp-block-file {

		.wp-block-file__textlink {
			margin-bottom: 0.5em;
			color: var(--color-text-link);
		}

		.wp-block-file__button-richtext-wrapper {
			margin-bottom: 0.5em;
		}

		.wp-block-file__button {

			@include nm-button-editor();
			color: inherit;
			font-size: 0.8em;
			border-radius: 1000px;
		}
	}
}

/*----------------------
### Video
----------------------*/

[data-type="core/video"] {
	font-size: inherit;
}

/*------------------------------------------
## Formatting Block
------------------------------------------*/

/*----------------------
### Code
----------------------*/

[data-type="core/code"] {

	.wp-block-code {

		@include nm-reverse;
		padding: 2em;
		border-radius: $base_border_radius;

		.block-editor-plain-text {
			background: transparent;
		}
	}
}

/*----------------------
### Freeform
----------------------*/

[data-type="core/freeform"] {
	font-size: inherit;
}

/*----------------------
### HTML
----------------------*/

[data-type="core/html"] {

	.wp-block-html .block-editor-plain-text {
		font-size: 0.9em;
		font-family: $base_code_font_family;
	}
}

/*----------------------
### Pullquote
----------------------*/

[data-type="core/pullquote"] {

	.wp-block-pullquote {
		position: relative;
		margin-right: auto;
		margin-left: auto;
		padding: 0;
		text-align: inherit;

		blockquote {
			position: relative;
			z-index: 1;
			margin: 0;

			p {
				margin: 0 0 1em;
				font-size: inherit;
			}

			.wp-block-pullquote__citation {
				display: block;
				font-size: 0.8em;
				font-style: italic;
				opacity: $text_color_thin;
			}
		}

		&:not(.is-style-solid-color) {

			@include nm-reverse();
			padding: 2em;
			border-color: var(--color-text-main);
			border-radius: $base_border_radius;

			&::before {
				top: -2em;
				right: -2em;
				bottom: -2em;
				left: -2em;
				padding: 2em;
			}

			blockquote {
				padding: 1em 0;
				border-color: inherit !important;
				border-top: 3px solid;
				border-bottom: 3px solid;
			}
		}

		&.is-style-solid-color {
			width: calc(100% - 20px);
			margin-top: calc(2em + 10px);
			margin-bottom: calc(2em + 10px);
			border-radius: $base_border_radius / 2;

			&::before {

				@include nm-reverse();
				position: absolute;
				top: -10px;
				right: -10px;
				bottom: -10px;
				left: -10px;
				padding: 2em;
				border-radius: $base_border_radius;
				content: "";
			}

			blockquote {
				max-width: 100%;
				padding: calc(2em - 10px);

				p {
					margin-bottom: 1em;
					font-size: 1.4em;
				}

				.wp-block-pullquote__citation {
					font-size: 1em;
					font-style: italic;
				}
			}
		}
	}

	&[data-align="left"],
	&[data-align="right"] {

		.wp-block-pullquote.is-style-solid-color {
			margin-top: 20px;
		}
	}
}

/*----------------------
### Table
----------------------*/

[data-type="core/table"] {

	.wp-block-table {
		overflow-x: initial;

		table {

			@include nm;
			width: auto;
			margin-bottom: 0.5em;
			border-radius: $base_border_radius;

		}

		th,
		td {
			padding: 1em;
			border: none;
			border-right: 1px solid var(--color-nm-dark);
			border-bottom: 1px solid var(--color-nm-dark);

			&:last-child {
				border-right: none;
			}
		}

		thead th {
			text-align: left;
			border-bottom-width: 3px;
		}

		tbody tr:last-child td {
			border-bottom: none;
		}

		tfoot td {
			border-top: 3px solid var(--color-nm-dark);
			border-bottom: none;
		}

		figcaption {
			margin-top: 1em;
			color: inherit;
			font-size: 0.9em;
		}
	}
}

/*----------------------
### Verse
----------------------*/

[data-type="core/verse"] {

	.wp-block-verse {

		@include nm-reverse();
		position: relative;
		padding: 2em;
		border-radius: $base_border_radius;
	}
}

/*------------------------------------------
## Column Block
------------------------------------------*/

/*----------------------
### Columns
----------------------*/

[data-type="core/column"] {
	font-size: inherit;
}

/*----------------------
### Button
----------------------*/

[data-type="core/button"] {
	margin-top: 7px !important;
	margin-bottom: 7px !important;

	.wp-block-button {
		margin-right: 20px;
		margin-bottom: 20px;
		color: inherit;

		&__link {
			position: relative;
			padding: 0.5em 1.5em;
			font-weight: bold;
			font-size: 1.1em;
			border-radius: 1000px;

			&:not(.has-background) {
				background-color: transparent;
			}

			&::before {

				@include nm;
				position: absolute;
				top: -3px;
				right: -3px;
				bottom: -3px;
				left: -3px;
				border-radius: inherit;
				content: "";
			}
		}
	}
}

/*----------------------
### Group
----------------------*/

[data-type="core/group"] {

	.wp-block-group {

		&.has-background,
		&.is-style-nm {
			padding: 1.5em 1em;
			border-radius: $base_border_radius;
		}

		&.is-style-nm {

			@include nm;
		}

		.wp-block:first-child {
			margin-top: 0;
		}

		.wp-block:last-child {
			margin-bottom: 0;
		}
	}
}

/*----------------------
### Media-Text
----------------------*/

[data-type="core/media-text"] {

	.wp-block-media-text {

		.wp-block-media-text__media {
			text-align: center;

			img,
			video {

				@include nm-image;
				max-width: 100%;
			}
		}

		.block-editor-inner-blocks {
			padding: 0 0 0 2em;

			.block-editor-block-list__block {

				&:first-child {
					margin-top: 0 !important;
				}

				&:nth-last-child(2) {
					margin-bottom: 0 !important;
				}
			}
		}

		&.has-media-on-the-right .block-editor-inner-blocks {
			padding: 0 2em 0 0;
		}

		&.has-background,
		&.is-style-nm {
			padding: 1.5em 1em;
			border-radius: $base_border_radius;
		}

		&.is-style-nm {

			@include nm;
		}

		@media screen and (max-width: 959px) {

			&.is-stacked-on-mobile {

				> .wp-block-media-text__media {
					margin-bottom: 2em;

					> img,
					> video {
						width: auto;
					}
				}

				&.has-media-on-the-right {

					.wp-block-media-text__content {
						grid-row: 2;
					}

					.wp-block-media-text__media {
						grid-row: 1;
					}
				}
			}
		}
	}
}

/*----------------------
### More
----------------------*/

[data-type="core/more"] {

	.wp-block-more {

		&::before {
			border-top: 3px var(--color-accent) solid;
		}

		input[type="text"] {
			color: var(--color-accent);
			font-family: inherit;
			background: var(--color-nm-light);
		}
	}
}

/*----------------------
### Nextpage
----------------------*/

[data-type="core/nextpage"] {

	.wp-block-nextpage {

		&::before {
			border-top: 3px var(--color-accent) solid;
		}

		> span {
			min-height: 30px;
			color: var(--color-accent);
			font-family: inherit;
			line-height: normal;
			background: var(--color-nm-light);
		}
	}
}

/*----------------------
### Separator
----------------------*/

[data-type="core/separator"] {

	.wp-block-separator {
		height: 3px;
		margin-right: auto;
		margin-left: auto;
		padding: 10px 0;
		border: none;
		border-radius: 1000px;
		transform: translateY(-6px);
		cursor: pointer;

		&:not(.is-style-wide):not(.is-style-dots) {
			max-width: 50%;
		}

		&:not(.is-style-dots):not(.has-background) {

			@include nm-border;
		}

		&.has-background:not(.is-style-dots) {
			position: relative;
			background-color: transparent !important;

			&::before {
				position: absolute;
				right: 0;
				bottom: 0;
				left: 0;
				height: 2px;
				background: currentColor;
				content: "";
			}
		}

		&.is-style-dots::before {
			font-size: 24px;
			font-family: inherit;
			line-height: 0;
		}
	}
}

/*----------------------
### Spacer
----------------------*/

[data-type="core/spacer"] {

	.block-library-spacer__resize-container {
		background: var(--color-nm-light);
	}
}

/*------------------------------------------
## Widget Block
------------------------------------------*/

/*----------------------
### Shortcode
----------------------*/

[data-type="core/shortcode"] {

	.wp-block-shortcode.components-placeholder {
		min-height: auto;
		font-family: inherit;
		background: var(--color-nm-dark);

		label {
			font-family: inherit;
		}
	}
}

/*----------------------
### Archives
----------------------*/

[data-type="core/archives"] {

	.wp-block-archives-dropdown select {

		&:active,
		&:focus,
		&:disabled {

			@include nm-input-editor;
			padding: 0.7em 40px 0.7em 1.4em;
			font-size: inherit;
			font-family: $base_font_falily;
			line-height: inherit;
			text-shadow: none;
			background: url(../images/chevron-down-solid.svg) no-repeat right 20px center/1em;
			border-radius: 1000px;
		}
	}

	ul.wp-block-archives {
		margin-left: 0;
		padding-left: 1.5em;
	}
}

/*----------------------
### Calendar
----------------------*/

[data-type="core/calendar"] {

	.wp-block-calendar {

		@include nm;
		max-width: 350px;
		padding: 1.5em 1em;
		border-radius: $base_border_radius;

		&.aligncenter {
			margin-right: auto;
			margin-left: auto;
		}

		.wp-calendar-table {
			width: 100%;
			table-layout: fixed;

			caption {
				margin-bottom: 1em;
				font-weight: bold;
			}

			thead th {
				font-weight: bold;
				text-align: center;
				background: transparent;
				border: none;
			}

			tbody td {
				padding: 0;
				padding: 0.3em;
				line-height: 2.4;
				text-align: center;
				border: none;

				a {

					@include nm;
					display: block;
					color: var(--color-accent);
					font-weight: bold;
					border-radius: $base_border_radius;
				}
			}
		}

		.wp-calendar-nav {
			display: flex;
			justify-content: space-between;
			padding-top: 0.5em;

			a {
				padding: 0.5em;
				color: var(--color-accent);
				text-decoration: none;
			}
		}
	}
}

/*----------------------
### Categories
----------------------*/

[data-type="core/categories"] {

	.wp-block-categories .wp-block-categories__dropdown {

		@include nm-input-editor;
		min-width: 0;
		max-width: 100%;
		height: auto;
		padding: 0.7em 40px 0.7em 1.4em;
		color: inherit;
		font-size: inherit;
		font-family: $base_font_falily;
		line-height: inherit;
		background: url(../images/chevron-down-solid.svg) no-repeat right 20px center/1em;
		border-radius: 1000px;

		option {
			background: #fff;
		}
	}

	.wp-block-categories > ul {
		margin-left: 0;
		padding-left: 1.5em;

		li {
			margin: 0.5em 0;
		}

		ul {
			margin-left: 0;
			padding: 0;
			list-style: none;

			li {
				position: relative;
				padding-left: 1em;

				&::before {
					position: absolute;
					left: 0;
					content: "-";
				}
			}
		}
	}
}

/*----------------------
### Latest-Comments
----------------------*/

[data-type="core/latest-comments"] {

	.wp-block-latest-comments {

		@include nm;
		margin: 0;
		padding: 1.5em 1em;
		border-radius: $base_border_radius;

		&__comment {
			position: relative;
			margin-bottom: 0;
			line-height: inherit;

			&:not(:last-child) {

				@include nm-border;
				margin-bottom: 1em;
				padding-bottom: 1em;
			}
		}

		.avatar,
		&__comment-avatar {

			@include nm;
			position: absolute;
			top: -9px;
			margin: 0;
		}

		&__comment-date {
			display: block;
			margin-top: 0.3em;
			color: inherit;
			font-size: 0.8em;

			&::before {
				margin-right: 0.2em;
				font-weight: 400;
				font-family: "Font Awesome 5 Free";
				content: "\f017";
			}
		}

		&__comment-excerpt {

			p {
				margin: 0.2em 0 0;
				line-height: inherit;
			}
		}
	}
}

/*----------------------
### Latest-Posts
----------------------*/

[data-type="core/latest-posts"] {

	.wp-block-latest-posts {
		margin: 0;

		&.wp-block-latest-posts__list {
			padding: 0;
		}

		> li {

			@include nm;
			@include clearfix();
			padding: 1.5em 1em;
			border-radius: $base_border_radius;

			> a {
				margin: 0;
				font-weight: bold;
				font-size: 1.2em;
				line-height: 1.4;
			}
		}

		&:not(.is-grid) {

			li:not(:last-child) {
				margin-bottom: 1.5em;
			}
		}

		&.is-grid {
			margin-right: -8px;
			margin-left: -8px;

			> li {
				margin: 0 8px 16px;
				padding: 1em;
			}
		}

		&__featured-image img {

			@include nm-image;
		}

		&__post-date {
			display: block;
			color: inherit;
			font-size: 0.8em;

			&::before {
				margin-right: 0.2em;
				font-weight: 400;
				font-family: "Font Awesome 5 Free";
				content: "\f017";
			}
		}
	}
}

/*----------------------
### RSS
----------------------*/

[data-type="core/rss"] {

	.wp-block-rss {
		list-style: none;

		&:not(.is-grid) {

			@include nm;
			margin-left: 0;
			padding: 1.5em 1em;
			border-radius: $base_border_radius;

			> li {
				margin: 0;

				&:not(:last-child) {

					@include nm-border;
					margin-bottom: 1em;
					padding-bottom: 1em;
				}
			}
		}

		&.is-grid {
			max-width: none;
			margin-right: -8px;
			margin-left: -8px;

			> li {

				@include nm;
				margin: 0 8px 16px;
				padding: 1em;
				border-radius: $base_border_radius;
			}
		}

		&__item-title a {
			display: inline-block;

			&::before {
				display: inline-block;
				margin-right: 0.5em;
				font-weight: 900;
				font-family: "Font Awesome 5 Free";
				content: "\f09e";
			}
		}

		&__item-author {
			color: inherit;
			font-size: 0.8em;
			font-style: italic;
		}

		&__item-publish-date {
			display: block;
			color: inherit;
			font-size: 0.8em;

			&::before {
				margin-right: 0.2em;
				font-weight: 400;
				font-family: "Font Awesome 5 Free";
				content: "\f017";
			}
		}

		&__item-excerpt {
			font-size: 0.9em;
		}
	}
}

/*----------------------
### Search
----------------------*/

[data-type="core/search"] {

	.wp-block-search {
		position: relative;
		display: block;
		max-width: 400px;

		.wp-block-search__label {
			position: absolute;
			width: 1px;
			height: 1px;
			margin: -1px;
			padding: 0;
			overflow: hidden;
			word-wrap: normal !important;
			border: 0;
			clip: rect(1px, 1px, 1px, 1px);
			-webkit-clip-path: inset(50%);
			clip-path: inset(50%);
		}

		.wp-block-search__input {

			@include nm-input-editor;
			width: 100%;
			max-width: 100%;
			padding: 0.7em 3em 0.7em 1.4em;
			color: inherit;
			font-size: inherit;
			font-family: $base_font_falily;
			border-radius: 1000px;
			opacity: $base_placeholder_opacity;

			&::placeholder {
				color: inherit;
				opacity: $base_placeholder_opacity;
			}
		}

		.wp-block-search__button {
			position: absolute;
			top: 50%;
			right: 0.5em;
			width: 2em;
			height: 2em;
			margin: 0;
			padding: 0;
			color: var(--color-accent);
			font-size: inherit;
			transform: translateY(-50%);
			visibility: hidden;
			transition: opacity $base_transition_duration ease-in-out;

			&::before {
				position: absolute;
				top: 50%;
				left: 50%;
				font-weight: 900;
				font-family: "Font Awesome 5 Free";
				transform: translate(-50%, -50%);
				visibility: visible;
				content: "\f002";
			}
		}
	}

	&[data-align="center"] .wp-block-search {
		margin-right: auto;
		margin-left: auto;
	}
}

/*----------------------
### Tag-cloud
----------------------*/

[data-type="core/tag-cloud"] {

	.wp-block-tag-cloud a {

		@include nm-button;
		display: inline-block;
		margin: 0 0.2em 1em;
		padding: 0.3em 1em;
		color: var(--color-accent);
		font-size: 1em !important;
		border-radius: 1000px;
		pointer-events: none;

		.tag-link-count {
			color: var(--color-text-main);
			opacity: $text_color_thin;
		}
	}
}

/*----------------------
### Social links
----------------------*/

[data-type="core/social-links"] {

	.wp-block-social-links {

		.block-editor-block-list__layout {
			flex-wrap: wrap;
		}

		.wp-social-link {
			margin: 0 0.5em 0.5em 0;
		}

		&.is-style-nm {

			.wp-social-link {

				@include nm-button;
				display: flex;
				align-items: center;
				justify-content: center;
				width: 2em;
				height: 2em;
				padding: 0;
				color: var(--color-accent);
				font-size: 1.3em;
				border-radius: $base_border_radius;
			}
		}
	}
}

/*------------------------------------------
## Embed Block
------------------------------------------*/

/*------------------------------------------
## Block Styles
------------------------------------------*/

/*----------------------
### Color
----------------------*/

.has-bg-color {
	color: var(--color-bg);
}

.has-dark-color {
	color: var(--color-nm-dark);
}

.has-light-color {
	color: var(--color-nm-light);
}

.has-main-text-color {
	color: var(--color-text-main);
}

.has-accent-color {
	color: var(--color-accent);
}

.has-link-text-color {
	color: var(--color-text-link);
}

.has-white-color {
	color: #fff;
}
